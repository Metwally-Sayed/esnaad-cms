generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id            String    @id @default(cuid())
  email         String    @unique
  name          String?
  role          String    @default("ADMIN")
  createdAt     DateTime  @default(now())
  updatedAt     DateTime  @updatedAt
  emailVerified Boolean   @default(false)
  image         String?
  accounts      Account[]
  sessions      Session[]

  @@map("user")
}

model Session {
  id        String   @id
  expiresAt DateTime
  token     String   @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  ipAddress String?
  userAgent String?
  userId    String
  user      User     @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("session")
}

model Account {
  id                    String    @id
  accountId             String
  providerId            String
  userId                String
  accessToken           String?
  refreshToken          String?
  idToken               String?
  accessTokenExpiresAt  DateTime?
  refreshTokenExpiresAt DateTime?
  scope                 String?
  password              String?
  createdAt             DateTime  @default(now())
  updatedAt             DateTime  @updatedAt
  user                  User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("account")
}

model Verification {
  id         String   @id
  identifier String
  value      String
  expiresAt  DateTime
  createdAt  DateTime @default(now())
  updatedAt  DateTime @default(now()) @updatedAt

  @@map("verification")
}

model Theme {
  id        String    @id @default(cuid())
  name      EnumTheme @default(DEFAULT)
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt

  @@map("theme")
}

model GlobalSettings {
  id                    String   @id @default("global")
  siteName              String?
  siteDescription       String?
  defaultHeaderId       String?
  createdAt             DateTime @default(now())
  updatedAt             DateTime @updatedAt
  defaultFooterId       String?
  defaultAuthor         String?
  defaultOgImage        String?
  defaultOgLocale       String?  @default("en_US")
  defaultOgSiteName     String?
  defaultRobots         String?  @default("index,follow")
  defaultTwitterCreator String?
  defaultTwitterSite    String?
  defaultFooter         Footer?  @relation("DefaultFooter", fields: [defaultFooterId], references: [id])
  defaultHeader         Header?  @relation("DefaultHeader", fields: [defaultHeaderId], references: [id])

  @@map("global_settings")
}

model Header {
  id             String           @id @default(cuid())
  name           String
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  globalSettings GlobalSettings[] @relation("DefaultHeader")
  headerLinks    HeaderLink[]
  pages          Page[]

  @@map("header")
}

model HeaderLink {
  id        String       @id @default(cuid())
  name      String
  slug      String
  order     Int          @default(0)
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  headerId  String
  parentId  String?
  nameAr    String?
  header    Header       @relation(fields: [headerId], references: [id], onDelete: Cascade)
  parent    HeaderLink?  @relation("HeaderLinkChildren", fields: [parentId], references: [id], onDelete: Cascade)
  children  HeaderLink[] @relation("HeaderLinkChildren")

  @@map("header_link")
}

model Page {
  id                     String          @id @default(cuid())
  title                  String
  slug                   String          @unique
  description            String?
  published              Boolean         @default(false)
  headerId               String?
  createdAt              DateTime        @default(now())
  updatedAt              DateTime        @updatedAt
  footerId               String?
  alternateLanguages     Json?
  author                 String?
  breadcrumbTitle        String?
  canonicalUrl           String?
  category               String?
  focusKeyword           String?
  metaRobots             String?
  modifiedDate           DateTime?
  nofollow               Boolean         @default(false)
  noindex                Boolean         @default(false)
  ogArticleAuthor        String?
  ogArticleModifiedTime  DateTime?
  ogArticlePublishedTime DateTime?
  ogArticleSection       String?
  ogArticleTags          String[]        @default([])
  ogDescription          String?
  ogImage                String?
  ogLocale               String?         @default("en_US")
  ogLocaleAlternate      String[]        @default([])
  ogSiteName             String?
  ogTitle                String?
  ogType                 String?         @default("website")
  ogUrl                  String?
  publishedDate          DateTime?
  robots                 String?         @default("index,follow")
  seoDescription         String?
  seoKeywords            String[]        @default([])
  seoTitle               String?
  structuredData         Json?
  tags                   String[]        @default([])
  twitterCard            String?         @default("summary_large_image")
  twitterCreator         String?
  twitterDescription     String?
  twitterImage           String?
  twitterImageAlt        String?
  twitterSite            String?
  twitterTitle           String?
  collectionItem         CollectionItem? @relation("CollectionItemPage")
  footer                 Footer?         @relation(fields: [footerId], references: [id])
  header                 Header?         @relation(fields: [headerId], references: [id])
  blocks                 PageBlock[]

  @@map("page")
}

model PageBlock {
  id        String   @id @default(cuid())
  order     Int
  pageId    String
  blockId   String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  block     Block    @relation(fields: [blockId], references: [id], onDelete: Cascade)
  page      Page     @relation(fields: [pageId], references: [id], onDelete: Cascade)

  @@unique([pageId, order])
  @@index([pageId])
  @@map("page_block")
}

model Block {
  id         String      @id @default(cuid())
  name       String
  type       BlockType
  content    Json
  isGlobal   Boolean     @default(false)
  createdAt  DateTime    @default(now())
  updatedAt  DateTime    @updatedAt
  variant    String      @default("default")
  pageBlocks PageBlock[]

  @@index([type])
  @@index([type, variant])
  @@map("block")
}

model Footer {
  id             String           @id @default(cuid())
  name           String
  createdAt      DateTime         @default(now())
  updatedAt      DateTime         @updatedAt
  footerLinks    FooterLink[]
  globalSettings GlobalSettings[] @relation("DefaultFooter")
  pages          Page[]

  @@map("footer")
}

model FooterLink {
  id        String       @id @default(cuid())
  name      String
  slug      String
  order     Int          @default(0)
  createdAt DateTime     @default(now())
  updatedAt DateTime     @updatedAt
  footerId  String
  parentId  String?
  nameAr    String?
  footer    Footer       @relation(fields: [footerId], references: [id], onDelete: Cascade)
  parent    FooterLink?  @relation("FooterLinkChildren", fields: [parentId], references: [id], onDelete: Cascade)
  children  FooterLink[] @relation("FooterLinkChildren")

  @@map("footer_link")
}

model Collection {
  id                     String           @id @default(cuid())
  name                   String
  slug                   String           @unique
  createdAt              DateTime         @default(now())
  updatedAt              DateTime         @updatedAt
  hasProfilePages        Boolean          @default(false)
  profilePageSlugPattern String?
  fields                 Json?
  items                  CollectionItem[]

  @@map("collection")
}

model CollectionItem {
  id           String     @id @default(cuid())
  collectionId String
  content      Json
  order        Int        @default(0)
  createdAt    DateTime   @default(now())
  updatedAt    DateTime   @updatedAt
  pageId       String?    @unique
  collection   Collection @relation(fields: [collectionId], references: [id], onDelete: Cascade)
  page         Page?      @relation("CollectionItemPage", fields: [pageId], references: [id])

  @@index([collectionId])
  @@map("collection_item")
}

model Media {
  id            String   @id @default(cuid())
  nameEn        String
  nameAr        String
  descriptionEn Json?
  descriptionAr Json?
  slug          String   @unique
  order         Int      @default(0)
  type          String
  image         String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@map("media")
}

enum EnumTheme {
  DEFAULT
  AMBER
  VERCEL
  CAFFEINE
  CLAUDE
  DARKMATTER
  FANCEY
  WHITEKOALA
}

enum BlockType {
  HERO
  TEXT
  IMAGE
  GALLERY
  VIDEO
  CTA
  TESTIMONIALS
  FEATURES
  PRICING
  FAQ
  FORM
  SPACER
  CODE
  CUSTOM
  HIGHLIGHTS
  ABOUT
  PROJECT_DETAILS
  MEDIA_DETAILS
  MEDIA_CARDS

  @@map("block_type")
}
